<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é—¨ç¦ç”µæ¢¯å¡ä¿®æ”¹å¸¸ç”¨äººå‘˜</title>
  <link rel="icon" href="./favicon.ico">
  <!-- å¼•å…¥ Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- é…ç½® Tailwind è‡ªå®šä¹‰ä¸»é¢˜ -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#4080FF',
            accent: '#0FC6C2',
            neutral: '#F5F7FA',
            dark: '#1D2129',
            danger: '#F53F3F',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
          boxShadow: {
            'card': '0 4px 20px rgba(0, 0, 0, 0.08)',
            'hover': '0 8px 30px rgba(22, 93, 255, 0.15)',
          }
        },
      }
    }
  </script>
  <style>
	.ontop {
		position: fixed;
		top: 30;
		width: 100%;
	}
    img {
        width: 50px; /* è®¾ç½®å›¾ç‰‡å®½åº¦ */
        height: 50px; /* è®¾ç½®å›¾ç‰‡é«˜åº¦ */
        border-radius: 50%; /* è®¾ç½®åœ†è§’åŠå¾„ä¸º50%ï¼Œäº§ç”Ÿåœ†å½¢æ•ˆæœ */
        overflow: hidden; /* éšè—è¶…å‡ºåœ†å½¢è¾¹ç•Œçš„éƒ¨åˆ† */
    }
  </style>
</head>
<body class="font-inter bg-neutral min-h-screen text-dark">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300" id="header">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <div class="text-primary text-2xl">ğŸ”</div>
        <h1 class="text-[clamp(1.2rem,3vw,1.8rem)] font-bold text-primary">é—¨ç¦ç”µæ¢¯å¡ä¿®æ”¹å¸¸ç”¨äººå‘˜</h1>
      </div>
      <div class="text-sm text-gray-500 hidden md:block">
        <span id="lastUpdate">æ•°æ®åŠ è½½ä¸­...</span>
      </div>
    </div>
  </header>

  <!-- ä¸»å†…å®¹åŒº -->
  <main class="container mx-auto px-4 py-8">
    <!-- æœç´¢åŒºåŸŸ -->
    <div class="mb-8 bg-white rounded-xl shadow-card p-6 transition-all duration-300 hover:shadow-hover">
      <div class="relative">
        <input 
          type="text" 
          id="searchInput" 
          placeholder="è¾“å…¥å…³é”®è¯æœç´¢ï¼ˆå¦‚ï¼šæ— èŠçŠ¬ï¼‰" 
          class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all duration-300 text-lg"
        >
        <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">ğŸ”</div>
        <button id="clearSearch" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 hidden">
          Ã—
        </button>
      </div>
      <div class="mt-4 flex flex-wrap gap-2">
        <span class="text-sm text-gray-500">â„¹ï¸ æ”¯æŒæ¨¡ç³Šæœç´¢ï¼ŒåŒ¹é…ç³»ç»ŸååŒ…å«å…³é”®è¯çš„ç»“æœ</span>
        <span class="text-sm text-gray-500">âš ï¸ æ’åä¸åˆ†å‰åï¼éšæœºæ’åï¼</span>
      </div>
    </div>

    <!-- è¡¨æ ¼åŒºåŸŸ - ä¿®å¤stickyè¡¨å¤´ -->
    <div class="bg-white rounded-xl shadow-card overflow-hidden transition-all duration-300 hover:shadow-hover">
      <!-- ç›´æ¥è®©overflow-x-autoä½œä¸ºè¡¨æ ¼çš„çˆ¶å®¹å™¨ -->
      <div class="overflow-x-auto">
        <table class="w-full min-w-[768px]">
          <thead>
            <!-- è¡¨å¤´stickyå®šä½ï¼Œç¡®ä¿ç›¸å¯¹äºè§†å£å›ºå®š -->
            <tr class="bg-primary text-white sticky top-0 z-10 ontop">
              <th class="py-4 px-6 text-left text-lg font-semibold">å¤´åƒ</th>
              <th class="py-4 px-6 text-center text-lg font-semibold">æ˜µç§°</th>
              <th class="py-4 px-6 text-center text-lg font-semibold">QQ</th>
              <th class="py-4 px-6 text-center text-lg font-semibold">æè¿°</th>
            </tr>
          </thead>
          <tbody id="systemTableBody" class="divide-y divide-gray-100">
            <tr>
              <td colspan="7" class="py-16 text-center text-gray-500">
                <div class="animate-spin text-2xl mb-4 block">âŸ³</div>
                <p>æ•°æ®åŠ è½½ä¸­ï¼Œè¯·ç¨å€™...</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div id="noResult" class="py-16 text-center text-gray-500 hidden">
        <div class="text-3xl mb-4 block text-gray-300">ğŸ”</div>
        <p>æœªæ‰¾åˆ°åŒ¹é…çš„äººç‰©ï¼Œè¯·å°è¯•å…¶ä»–æœç´¢å…³é”®è¯</p>
      </div>
    </div>
  </main>

  <!-- é¡µè„š -->
  <footer class="bg-white mt-12 py-6 border-t border-gray-100">
    <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
        <p>é—¨ç¦å¡ç”µæ¢¯å¡å¸¸ç”¨äººå‘˜æŸ¥è¯¢ | ä»…ä¸ºæ–¹ä¾¿å¤§å®¶è”ç³»ï¼Œç¦æ­¢ç”¨äºè¿æ³•ç”¨é€” byï¼šç ¸æ‰æ¢æ–°çš„ QQ3374963142ã€ç‘œä¼—ä¸åŒ QQ991069003</p>
    </div>
  </footer>

  <!-- æ›´æ–°æç¤ºå¼¹çª— -->
  <div id="updateModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modalContent">
      <div class="text-center mb-6">
        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary mb-4">
          <div class="text-2xl">âŸ³</div>
        </div>
        <h3 class="text-xl font-bold text-dark mb-2">æ•°æ®æ›´æ–°æç¤º</h3>
        <p class="text-gray-500">å·²æœ‰1å°æ—¶æœªæ›´æ–°æ•°æ®ï¼Œæ˜¯å¦åˆ·æ–°è·å–æœ€æ–°ä¿¡æ¯ï¼Ÿ</p>
      </div>
      <div class="flex space-x-4">
        <button id="cancelUpdate" class="flex-1 py-3 px-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-gray-50 transition-all duration-300">
          ç¨åæ›´æ–°
        </button>
        <button id="confirmUpdate" class="flex-1 py-3 px-4 bg-primary text-white rounded-lg hover:bg-primary/90 transition-all duration-300">
          ç«‹å³æ›´æ–°
        </button>
      </div>
    </div>
  </div>

  <script>
    // å…¨å±€å˜é‡
    let systemData = {};
    let searchKeyword = '';
    
    // DOMå…ƒç´ 
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    const tableBody = document.getElementById('systemTableBody');
    const noResult = document.getElementById('noResult');
    const lastUpdate = document.getElementById('lastUpdate');
    const updateModal = document.getElementById('updateModal');
    const modalContent = document.getElementById('modalContent');
    const confirmUpdate = document.getElementById('confirmUpdate');
    const cancelUpdate = document.getElementById('cancelUpdate');
    const header = document.getElementById('header');
    
    // é¡µé¢æ»šåŠ¨æ•ˆæœ
    window.addEventListener('scroll', () => {
      if (window.scrollY > 10) {
        header.classList.add('py-2', 'shadow');
        header.classList.remove('py-4', 'shadow-sm');
      } else {
        header.classList.add('py-4', 'shadow-sm');
        header.classList.remove('py-2', 'shadow');
      }
    });
    
    // æ ¼å¼åŒ–æ—¶é—´
    function formatTime(date) {
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      const hour = String(date.getHours()).padStart(2, '0');
      const minute = String(date.getMinutes()).padStart(2, '0');
      return `${year}-${month}-${day} ${hour}:${minute}`;
    }
    
    // è¯·æ±‚æ•°æ®
    async function fetchSystemData() {
      try {
        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        tableBody.innerHTML = `
          <tr>
            <td colspan="7" class="py-16 text-center text-gray-500">
              <div class="animate-spin text-2xl mb-4 block">âŸ³</div>
              <p>æ•°æ®åŠ è½½ä¸­ï¼Œè¯·ç¨å€™...</p>
            </td>
          </tr>
        `;
        
        const response = await fetch('./people.json');
        if (!response.ok) throw new Error('æ•°æ®åŠ è½½å¤±è´¥');
        
        const data = await response.json();
        systemData = data.people || {};
        
        // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
        const now = new Date();
        lastUpdate.textContent = `æœ€åæ›´æ–°ï¼š${formatTime(now)}`;
        
        // æ¸²æŸ“è¡¨æ ¼
        renderTable();
        
      } catch (error) {
        tableBody.innerHTML = `
          <tr>
            <td colspan="7" class="py-16 text-center text-red-500">
              <div class="text-2xl mb-4 block">âŒ</div>
              <p>${error.message}</p>
              <button onclick="fetchSystemData()" class="mt-4 text-primary hover:underline">é‡è¯•</button>
            </td>
          </tr>
        `;
        console.error('æ•°æ®åŠ è½½é”™è¯¯:', error);
      }
    }
    
    // æ¸²æŸ“è¡¨æ ¼
    function renderTable() {
      const systems = Object.entries(systemData);
      let filteredSystems = systems;
      
      // æœç´¢è¿‡æ»¤
      if (searchKeyword.trim()) {
        const keyword = searchKeyword.trim().toLowerCase();
        filteredSystems = systems.filter(([name]) => 
          name.toLowerCase().includes(keyword)
        );
      }
      
      // æ˜¾ç¤ºæ— ç»“æœ
      if (filteredSystems.length === 0) {
        tableBody.innerHTML = '';
        noResult.classList.remove('hidden');
        return;
      }
      
      noResult.classList.add('hidden');
      
      // ç”Ÿæˆè¡¨æ ¼å†…å®¹
      let tableHtml = '';
      filteredSystems.forEach(([name, config]) => {
        tableHtml += `
          <tr class="hover:bg-neutral/50 transition-all duration-300">
            <td class="py-4 px-6 font-medium text-lg"><img src="${config.user_qq_head_url}"></td>
            <td class="py-4 px-6 text-center">${config.user_name}</td>
            <td class="py-4 px-6 text-center">${config.user_qq}</td>
            <td class="py-4 px-6 text-center">${config.user_note}</td>
          </tr>
        `;
      });
      
      tableBody.innerHTML = tableHtml;
      
      // æ·»åŠ è¡Œå…¥åœºåŠ¨ç”»
      const rows = tableBody.querySelectorAll('tr');
      rows.forEach((row, index) => {
        row.style.opacity = '0';
        row.style.transform = 'translateY(20px)';
        setTimeout(() => {
          row.style.transition = 'all 0.3s ease';
          row.style.opacity = '1';
          row.style.transform = 'translateY(0)';
        }, 50 * index);
      });
    }
    
    // æœç´¢åŠŸèƒ½
    searchInput.addEventListener('input', (e) => {
      searchKeyword = e.target.value;
      renderTable();
      
      if (searchKeyword.trim()) {
        clearSearch.classList.remove('hidden');
      } else {
        clearSearch.classList.add('hidden');
      }
    });
    
    // æ¸…é™¤æœç´¢
    clearSearch.addEventListener('click', () => {
      searchInput.value = '';
      searchKeyword = '';
      clearSearch.classList.add('hidden');
      renderTable();
      searchInput.focus();
    });
    
    // å¼¹çª—æ§åˆ¶
    function showUpdateModal() {
      updateModal.classList.remove('hidden');
      setTimeout(() => {
        modalContent.classList.remove('scale-95', 'opacity-0');
        modalContent.classList.add('scale-100', 'opacity-100');
      }, 10);
    }
    
    function hideUpdateModal() {
      modalContent.classList.remove('scale-100', 'opacity-100');
      modalContent.classList.add('scale-95', 'opacity-0');
      setTimeout(() => {
        updateModal.classList.add('hidden');
      }, 300);
    }
    
    // ç¡®è®¤æ›´æ–°
    confirmUpdate.addEventListener('click', () => {
      hideUpdateModal();
      fetchSystemData();
    });
    
    // å–æ¶ˆæ›´æ–°
    cancelUpdate.addEventListener('click', hideUpdateModal);
    
    // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
    updateModal.addEventListener('click', (e) => {
      if (e.target === updateModal) hideUpdateModal();
    });
    
    // æ¯å°æ—¶æç¤ºæ›´æ–°
    setInterval(showUpdateModal, 3600000);
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      fetchSystemData();
      searchInput.focus();
      
      // ESCå…³é—­å¼¹çª—
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !updateModal.classList.contains('hidden')) {
          hideUpdateModal();
        }
      });
    });
  </script>
</body>
</html>